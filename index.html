<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rrscue Rush!</title>
    <link rel="manifest" href="manifest.json">
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
            .then(reg => console.log("Service Worker Registered!", reg))
            .catch(err => console.log("Service Worker Failed!", err));
        }

        function updatePWA() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistration().then(registration => {
                    if (registration) {
                        registration.unregister().then(() => {
                            caches.keys().then(cacheNames => {
                                return Promise.all(
                                    cacheNames.map(cacheName => caches.delete(cacheName))
                                );
                            }).then(() => {
                                window.location.reload(true); // 確保強制重新載入最新版本
                            });
                        });
                    } else {
                        window.location.reload(true);
                    }
                });
            } else {
                window.location.reload(true);
            }
        }
    </script>    
    <link rel="stylesheet" href="css/styles.css">
    <script defer src="js/script.js"></script>
</head>
<body>
    <div class="header">        
        <div class="header-logo">            
            <div class="header-title">Rescue Rush!</div>
        </div>        
        <div class="header-btn-menu"><span id="updateBtn">⟳</span><span>&nbsp;</span><span>☰</span></div>
    </div>


    <div class="container">        
        <div class="info-disabled">
            <p>我的位置：<span id="location-info">查詢中...</span></p>                
        </div>
        <div>&nbsp;</div>

        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('esun')">玉山銀行</button>
            <button class="tab-button" onclick="switchTab('ctbc')">中國信託</button>
        </div>
        
        <div class="content-box">
            <div id="esun" class="tab-content active">
                <div style="display:flex;">
                    <image src="images/logo-esun.png" class="section-logo"></image>
                    <h2 class="section-title">玉山銀行 - UBear</h2> 
                </div>

                <p><b>救援項目</b></p>
                <ul>
                    <li>拖吊(50公里內免費，超過每公里加收 60 元; 高速公路作業費用基本起拖1500內免費，超過由持卡人自付)</li>
                    <li>充電接電(不含柴油車)</li>
                    <li>送油(不含柴油車)、加水</li>
                    <li>更換備胎充氣</li>
                </ul>
                                
                <button class="call-button" onclick="callRescue('0800-011-885')">立即呼叫救援</button>
                <p class="text-center text-memo">緊急救援電話：0800-011-885</p>

                <div>&nbsp;</div>
                <div class="info-disabled">
                    <p><b>救援說明</b></p>
                    <p>1. 請於「登錄及查詢」網頁完成車牌號碼登錄 (三個營業日後生效 )。※ 車號欄位請勿輸入「－」，舉例：ABC1234</p>
                    <p>2. 下載<a href="https://event.esunbank.com.tw/credit/1070425wallet/tutorial.html">[玉山Wallet App]</a>，即可登錄車號。操作步驟：生活 > 附加權益 > 道路救援。</p>
                    <p>3. 救援服務車到達時需出示玉山信用卡。※ 現場以認卡、認車、認人為原則。</p>
                </div>
            </div>


            <div id="ctbc" class="tab-content">
                <div style="display:flex;">
                    <image src="images/logo-ctbc.png" class="section-logo"></image>
                    <h2 class="section-title">中國信託 - ALLME</h2>
                </div>       

                <p><b>救援項目</b></p>
                <ul>
                    <li>拖吊(50公里內免費，超過每公里加收 60 元; 高速公路作業費用基本起拖1500內免費，超過由持卡人自付)</li>
                    <li>充電接電(不含柴油車)</li>
                    <li>送油(不含柴油車)、加水</li>
                    <li>更換備胎充氣</li>
                </ul>
                
                <button class="call-button" onclick="callRescue('0800-000-685')">立即呼叫救援</button>
                <p class="text-center text-memo">緊急救援電話：0800-000-685</p>

                <div>&nbsp;</div>
                <div class="info-disabled">
                    <p><b>救援說明</b></p>
                    <p>1. 請撥(02)2745-8080中國信託客服中心，再按快速鍵輸入883再按1，依語音指示輸入相關資料即可完成登錄。</p>
                    <p>2. 近1個月信用卡帳單新增消費金額達3仟元(含)以上；或近3個月信用卡帳單新增消費金額達9仟元(含)以上。每卡可享一年三次、每次50公里免費道路救援。</p>                    
                </div>
            </div>
        </div>
        <div>&nbsp;</div>
        <div>&nbsp;</div>
    </div>
</body>
</html>
